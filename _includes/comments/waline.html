<!-- https://waline.js.org/ -->
<script src="{{ site.data.origin[type].waline.js | relative_url }}"></script>
<link rel="stylesheet" href="{{ site.data.origin[type].waline.css | relative_url }}" />
<div id="waline"></div>
<script type="text/javascript">
  (function() {
    const locale = {
      nick: 'Name',
      mail: 'email',
      link: 'website',
      placeholder: '{{ site.comments.waline.placeholder }}',
      sofa: '',
      comment: '',
      word: 'word',
      submit: 'Reply',
      latest: 'Newest',
      oldest: '',
      hottest: 'Most relevant',
    };
    Waline.init({
      el: '#waline',
      serverURL: '{{ site.comments.waline.server }}',
      lang: 'en-US',
      count: 'false',
      login: 'disable',
      search: 'false',
      dark: "__waline__css__",
      emoji: [
        "{{ site.data.origin[type].waline.emojis | relative_url }}/qq",
        '{{ site.data.origin[type].waline.emojis | relative_url }}/weibo',
        '{{ site.data.origin[type].waline.emojis | relative_url }}/tieba',
        '{{ site.data.origin[type].waline.emojis | relative_url }}/bilibili',
      ],
      locale,
    });
    let head = document.getElementsByTagName("head")[0];
    let css = head.lastChild;
    let cssContent = css.textContent.replace("__waline__css__", "");
    let cssContentPerferredDark = "@media (prefers-color-scheme: dark){html:not([data-mode])" + cssContent + "}";
    let cssContentSelectedDark = "html[data-mode=dark]" + cssContent;
    css.textContent = cssContentPerferredDark;
    let style = document.createElement('style');
    style.textContent = cssContentSelectedDark;
    head.appendChild(style);
  })();
</script>
