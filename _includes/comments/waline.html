<link
  rel="stylesheet"
  href="{{ site.data.origin[type].waline.css | relative_url }}"
/>

<script type="module">
  import { init } from "{{ site.data.origin[type].waline.js | relative_url }}";

  const walineThread = document.createElement("div");
  walineThread.id = "waline";

  const footer = document.querySelector("footer");
  if (footer) {
    footer.insertAdjacentElement("beforebegin", walineThread);
  }

  const locale = {
    nick: "Name",
    mail: "Mail",
    link: "Website",
    placeholder: "{{ site.comments.waline.placeholder }}",
    sofa: "",
    comment: "",
    word: "word",
    submit: "Reply",
    latest: "",
    oldest: "",
    hottest: "",
    reactionTitle: ""
  };

  const emojiPath = "{{ site.data.origin[type].waline.emojis | relative_url }}";
  const emojiSets = [{
    name: 'sh',
    icon: 'ðŸ˜€',
    prefix: 'sh_',
    type: 'gif',
    folder: '/assets/lib/waline/emojis/',
    items: [
      "smile","mouth_squirm","heart_eyes","flushed","sunglasses","sob","shy","silent","sleep","cry","awkward","rage","yum","grin","confounded","sad","cool","cold_sweat","crazy","vomit","chuckle","lovely","rolling_eyes","arrogant","yummy","sleepy","scared","sweat","laugh","solder","fighting","scold","shush","dizzy_face","mad","feeble","skull","knock","bye","pick_nose","clap","embarassed","snigger","annoyed_left","annoyed_right","yawn","look_down","grievance","pensive","smirk","kiss_right","kiss","fearful","poor","wink","joy","doge","cover_face_cry","whatever","lift_check","cute","antic","vomit_blood","surprised","pock_face","tangled","pretty","mask_fighting","mask_hug","mask","working","busy","headache","worry","cover_face","burning_eyes","wowyo","hair_loss","question_mask","peep","emm","waterlemon_face","rolling_face","hug","doubt","sweat1","white-yum","white1","white2","white_kiss","white_shit","white_slap","white_sunglasses","white_thumbsup","bear1","bear2","bear3","bear4","bear5","bird1","bird2","bird3","bird4","heart","rose","rose_dead","ghost","anger","lip","broken_heart","coffee","alpaca","hongbao","firecracker","lantern","xi","thumbsup","ok","hold_fist","hand_shake","come","v","fist","diss","thumbsdown","metal","no","lemon_face","moon","sun","pig","knife","hocho","gun","tea","shit","tada","candy","watermelon","rice","feeding_bottle","beer","karaoke","cake","egg","bomb","dollar","light","gift","flower","plane","candle","ladybug","pill","basketball","pingpong","soccer","panda","pinwheel","ramen","umbrella","banana","toilet_paper","bag","fa","handsome","mail","balloon","board","bow","boy1","boy2","bulb","car","clock","cloudy","crab","example","frog","rain","ring","sofa","train_body","train_tail","tran_head","surrender","taiji_boy","taiji_girl"
    ]
  }];

  try {
    init({
      el: "#waline",
      serverURL: "{{ site.comments.waline.server }}",
      lang: "en",
      meta: ["nick"],
      count: false,
      login: "disable",
      search: false,
      emoji: emojiSets,
      dark: "__waline__css__",
      locale,
      pageview: false,
      reaction: false,
      path: window.location.pathname
    });



    const customStyle = document.createElement("style");
    customStyle.textContent = `#waline{--waline-theme-color:var(--secondary-color);--waline-active-color:var(--primary-color)}#waline .wl-panel{background-color:transparent!important;box-shadow:none!important;border-radius:0!important;border:none!important;margin:0!important}#waline .wl-editor{width:100%!important;min-height:4.75em!important;margin:.75em 0!important;border-radius:0!important}#waline .wl-editor,#waline .wl-input,#waline .wl-header label,#waline .wl-header input{color:inherit!important;font-size:inherit;font-family:inherit}#waline .wl-editor:focus,#waline .wl-input:focus,.wl-card .wl-meta>span{background:rgba(135,135,135,.05)!important}#waline .wl-power,#waline .wl-empty,#waline .wl-gif-popup{display:none!important}#waline .wl-btn{border-radius:0}#waline .wl-header{border-radius:0;padding:0;border-bottom:1px dashed var(--main-border-color)}#waline .wl-emoji-popup{inset-inline-start:2.75em;width:75%;max-width:unset;top:0;background:rgba(135,135,135,.05)border:1px solid var(--main-border-color);backdrop-filter:blur(5px);box-shadow:none}#waline .wl-emoji-popup button:hover{background:rgba(135,135,135,.2);border-radius:6px}#waline .wl-emoji-popup .wl-tab-wrapper{max-height:120px}#waline .wl-count,#waline .wl-actions a,#waline .wl-actions button[title="Preview"],#waline .wl-action[title="Upload Image"]{display:none!important}#waline .wl-card .wl-content p,#waline .wl-card span.wl-nick{color:inherit}#waline .wl-btn.primary{border:none;border-radius:2px;font-weight:600;background-color:rgba(135,135,135,.05);color:var(--secondary-color)}#waline .wl-btn.primary:hover{background-color:var(--primary-color);color:#fff}`;
    document.head.appendChild(customStyle);
  } catch (error) {
    console.error("Failed to initialize Waline:", error);
  }
</script>
